(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,o){e.exports=o(35)},23:function(e,t,o){},33:function(e,t,o){},35:function(e,t,o){"use strict";o.r(t);var a=o(0),n=o.n(a),r=o(14),c=o.n(r),s=o(7),i=o(1),l=o(2),u=o(4),h=o(3),d=o(5),k=o(17),b=o(11),m="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:f},g=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(b.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},v=function(e){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(b.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})};o(23);var E={textAlign:"center",background:" #17a2b8",color:"white",padding:"10px",margin:"0"},y=function(){return n.a.createElement("h1",{style:E},"MyReads")},w=o(25);var j={margin:"0",fontSize:"12px"},O=function(e){return void 0!==e.authors?e.authors.map(function(e){return n.a.createElement("div",{key:w(),style:j},e)}):n.a.createElement("div",{key:w()})};var B=function(e){var t="Not In Library",o={textAlign:"center",width:128,marginTop:-20,color:"white",backgroundColor:"#ffc107"};if(e.storedBooks.forEach(function(a){a.id===e.book.id&&(t=a.shelf,o={textAlign:"center",width:128,marginTop:-20,color:"white",backgroundColor:"#007bff"})}),void 0!==e.book.shelf)switch(e.book.shelf){case"currentlyReading":t="currentlyReading",o={textAlign:"center",width:128,marginTop:-20,color:"white",backgroundColor:"#007bff"};break;case"wantToRead":t="wantToRead",o={textAlign:"center",width:128,marginTop:-20,color:"white",backgroundColor:"#dc3545"};break;case"read":t="read",o={textAlign:"center",width:128,marginTop:-20,color:"white",backgroundColor:"#6c757d"};break;default:t="Not In Library",o={textAlign:"center",width:128,marginTop:-20,color:"white",backgroundColor:"#ffc107"}}return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{style:o},t))};var S=function(e){return void 0!==e.book.imageLinks?n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url("+e.book.imageLinks.thumbnail+")"}},n.a.createElement(B,{book:e.book,storedBooks:e.storedBooks})):n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,background:"white"}},n.a.createElement(B,{book:e.book,storedBooks:e.storedBooks}))},C=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"checkBookShelf",value:function(e){var t="none";return Object(s.a)(this.props.storedBooks).forEach(function(o){if(o.id===e.id)return t=o.shelf}),t}},{key:"render",value:function(){var e=this;return this.props.books.map(function(t){return n.a.createElement("li",{key:t.id},n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},n.a.createElement(S,{book:t,storedBooks:e.props.storedBooks}),n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{onChange:e.props.move.bind(e,t),value:t.shelf?t.shelf:e.checkBookShelf(t)},n.a.createElement("option",{value:"move",disabled:!0},"Move to..."),n.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),n.a.createElement("option",{value:"wantToRead"},"Want to Read"),n.a.createElement("option",{value:"read"},"Read"),n.a.createElement("option",{value:"none"},"None")))),n.a.createElement("div",{className:"book-title",style:{color:"#007bff"}},t.title),n.a.createElement(O,{authors:t.authors})))})}}]),t}(a.Component);var N=function(e){var t=e.title,o={textAlign:"center",color:"white",backgroundColor:"#dc3545"};switch(e.title){case"Currently Reading":o={textAlign:"center",color:"white",backgroundColor:"#007bff"};break;case"Want To Read":o={textAlign:"center",color:"white",backgroundColor:"#dc3545"};break;case"Read":o={textAlign:"center",color:"white",backgroundColor:"#6c757d"};break;default:return!1}return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"bookshelf-title",style:o},t))},R=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"bookshelf"},n.a.createElement(N,{title:this.props.title}),n.a.createElement("ol",{className:"books-grid"},n.a.createElement(C,{books:this.props.books,move:this.props.move,storedBooks:this.props.storedBooks})))}}]),t}(a.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.refs.inputField.focus()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"search-books"},n.a.createElement("div",{className:"search-books-bar"},n.a.createElement("button",{className:"close-search",style:{cursor:"pointer"},onClick:function(){return e.props.closeSearchPage()}},"Close"),n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{ref:"inputField",type:"text",onChange:this.props.search.bind(this),placeholder:"Search by title or author"}))),n.a.createElement("div",{className:"search-books-results"},n.a.createElement("ol",{className:"books-grid"})))}}]),t}(a.Component),x=function(e){function t(){var e,o;Object(i.a)(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(o=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={books:[],currentlyReading:[],wantToRead:[],read:[],searchedBooks:[],showSearchPage:!1},o.reorganizeBooks=function(){var e=[],t=[],a=[];Object(s.a)(o.state.books).forEach(function(o){switch(o.shelf){case"currentlyReading":e.push(o);break;case"wantToRead":t.push(o);break;case"read":a.push(o);break;default:return!1}}),o.setState({currentlyReading:e,wantToRead:t,read:a})},o.move=function(e,t){g(e,t.target.value).then(function(e){o.componentDidMount()})},o.search=function(e){if(""!==e.target.value)v(e.target.value).then(function(e){o.setState({searchedBooks:e})});else{o.setState({searchedBooks:[]})}},o.closeSearchPage=function(){o.setState({showSearchPage:!1})},o}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(m,"/books"),{headers:p}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){e.setState({books:t}),e.reorganizeBooks()})}},{key:"render",value:function(){var e=this;return n.a.createElement(k.a,null,n.a.createElement("div",{className:"app"},this.state.showSearchPage?n.a.createElement(n.a.Fragment,null,n.a.createElement(y,null),n.a.createElement(T,{search:this.search,closeSearchPage:this.closeSearchPage}),this.state.searchedBooks.length>0?n.a.createElement(R,{books:this.state.searchedBooks,storedBooks:this.state.books,title:"Searched Books",move:this.move}):n.a.createElement("h2",null,"No Book Founded")):n.a.createElement("div",{className:"list-books"},n.a.createElement(y,null),n.a.createElement(R,{books:this.state.currentlyReading,storedBooks:this.state.books,title:"Currently Reading",move:this.move}),n.a.createElement(R,{books:this.state.wantToRead,storedBooks:this.state.books,title:"Want To Read",move:this.move}),n.a.createElement(R,{books:this.state.read,storedBooks:this.state.books,title:"Read",move:this.move}),n.a.createElement("div",{className:"open-search"},n.a.createElement("button",{onClick:function(){return e.setState({showSearchPage:!0})}},"Add a book")))))}}]),t}(n.a.Component);o(33);c.a.render(n.a.createElement(x,null),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.d862775e.chunk.js.map